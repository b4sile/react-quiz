(this["webpackJsonpreact-quiz"]=this["webpackJsonpreact-quiz"]||[]).push([[0],{18:function(e,t,n){e.exports={btn:"style_btn__1i9zR"}},2:function(e,t,n){e.exports={container:"style_container__3hSNO",question:"style_question__1Xy8a",tags:"style_tags__NVVsM",category:"style_category__2b9bQ",difficulty:"style_difficulty__QdqRC",easy:"style_easy__lVcCW",medium:"style_medium__21WFL",hard:"style_hard__3S71o",form:"style_form__3w4ma",label:"style_label__3Y_ye",input:"style_input__1oMDb",results:"style_results__1Qiz1",res_item:"style_res_item__BWSIb",line:"style_line__2_2JX",res_text:"style_res_text__2HHpN",bg_line:"style_bg_line__pssm8",btn:"style_btn__3OvAl"}},25:function(e,t,n){},26:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(11),c=n.n(a),i=(n(25),n(26),n(4)),o=n(19),u=n(5),l=n(20),d=n(13),b=n.n(d),f=n(18),j=n.n(f),_=n(1),m=["children","className"],h=function(e){var t=e.children,n=e.className,r=Object(l.a)(e,m);return Object(_.jsx)("button",Object(u.a)(Object(u.a)({className:b()(j.a.btn,n)},r),{},{children:t}))},p=n(3),O=n(10),g=n(6),y=n.n(g),x=n(14),v=n(7),w=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e},N=function(e,t){if(e.length!==t.length)return!1;for(var n=Array.from(new Set([].concat(Object(v.a)(e),Object(v.a)(t)))),r=function(){var n=a[s];if(e.filter((function(e){return e===n})).length!==t.filter((function(e){return e===n})).length)return{v:!1}},s=0,a=n;s<a.length;s++){var c=r();if("object"===typeof c)return c.v}return!0},q=n(8),Q={getQuestions:function(){var e=Object(x.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api.php?amount=10");case 2:return t=e.sent,e.next=5,t.json();case 5:if(0!==(n=e.sent).response_code){e.next=9;break}return n.results.forEach((function(e){e.category=Object(q.decode)(e.category),"string"===typeof e.correct_answer?e.correct_answer=Object(q.decode)(e.correct_answer):e.correct_answer=e.correct_answer.map((function(e){return Object(q.decode)(e)})),e.incorrect_answers=e.incorrect_answers.map((function(e){return Object(q.decode)(e)})),e.question=Object(q.decode)(e.question)})),e.abrupt("return",n.results.map((function(e){var t;return t="string"===typeof e.correct_answer?[e.correct_answer]:e.correct_answer,Object(u.a)(Object(u.a)({},e),{},{variants:w([].concat(Object(v.a)(t),Object(v.a)(e.incorrect_answers)))})})));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},C=Object(p.b)("game/fetchQuestions",Object(x.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.getQuestions();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",t);case 7:throw new Error("Invalid response");case 8:case"end":return e.stop()}}),e)})))),k={questions:[],error:void 0,isLoading:!1,isGameRun:!1,currentQuestionInd:0,answers:[],results:null},S=Object(p.c)({name:"game",initialState:k,reducers:{setAnswer:function(e,t){var n=t.payload,r=e.answers[e.currentQuestionInd];"boolean"!==e.questions[e.currentQuestionInd].type&&r.length?-1===r.indexOf(n)?r.push(n):e.answers[e.currentQuestionInd]=r.filter((function(e){return e!==n})):e.answers[e.currentQuestionInd]=[n]},setNextQuestion:function(e){e.currentQuestionInd++},setGameOver:function(e){e.isGameRun=!1,e.currentQuestionInd=0,e.results={all:{count:e.questions.length,correct:0},easy:{correct:0,count:0},medium:{count:0,correct:0},hard:{count:0,correct:0}};for(var t=0;t<e.questions.length;t++){var n=e.questions[t],r=void 0;r="string"===typeof n.correct_answer?[n.correct_answer]:n.correct_answer;var s=N(r,e.answers[t]);e.results[n.difficulty].count++,s&&(e.results.all.correct++,e.results[n.difficulty].correct++)}}},extraReducers:function(e){e.addCase(C.fulfilled,(function(e,t){var n=t.payload;e.answers=Array.from({length:n.length},(function(){return[]})),e.isLoading=!1,e.isGameRun=!0,e.results=null,e.questions=n})),e.addCase(C.pending,(function(e){e.isLoading=!0})),e.addCase(C.rejected,(function(e,t){e.error=t.error.message,e.isLoading=!1}))}}),I=S.actions,L=S.reducer,G=I.setNextQuestion,R=I.setGameOver,A=I.setAnswer,F=L,M=function(e){return e.game},z=Object(p.a)({reducer:{game:F}}),E=O.c,J=function(){var e=E(M),t=e.error,n=e.questions,r=e.isLoading,s=e.isGameRun,a=e.currentQuestionInd,c=e.answers,i=e.results,o=Object(O.b)(),u=c[a];return{question:n[a],error:t,isLoading:r,handleStartGame:function(){o(C())},isGameRun:s,handleNextStep:function(e){e.preventDefault(),a<n.length-1?o(G()):o(R())},isLastQuestion:n.length-1===a,onChange:function(e){o(A(e.target.value))},answer:u,results:i}},V=n(2),W=n.n(V),B=function(){var e,t=J(),n=t.question,r=t.error,a=t.isLoading,c=t.handleStartGame,u=t.isGameRun,l=t.handleNextStep,d=t.isLastQuestion,f=t.onChange,j=t.answer,m=t.results;if(a)return Object(_.jsx)("p",{children:"Loading..."});if(r)return Object(_.jsx)("p",{children:r});if(m)return Object(_.jsxs)("div",{className:W.a.container,children:[Object(_.jsx)("div",{className:W.a.results,children:Object.entries(m).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1],s="".concat(r.count?(100*r.correct/r.count).toFixed(0):0,"%");return Object(_.jsxs)("div",{className:W.a.res_item,children:[Object(_.jsxs)("p",{className:W.a.res_text,children:[n.toUpperCase()," questions: ",r.count," Correct answers:"," ",r.correct," (",s,")"]}),Object(_.jsx)("div",{className:W.a.bg_line,children:Object(_.jsx)("div",{className:W.a.line,style:{width:s}})})]},n)}))}),Object(_.jsx)(h,{className:W.a.btn,onClick:c,children:"Start over"})]});if(!u)return Object(_.jsx)(h,{onClick:c,children:"start"});var p=n.category,O=n.difficulty,g=n.variants,y=n.type,x=n.question,v="boolean"===y?"radio":"checkbox";return Object(_.jsxs)("div",{className:W.a.container,children:[Object(_.jsx)("h2",{className:W.a.question,children:x}),Object(_.jsxs)("div",{className:W.a.tags,children:[Object(_.jsxs)("span",{className:W.a.category,children:["Category - ",p]}),Object(_.jsx)("span",{className:b()(W.a.difficulty,(e={},Object(i.a)(e,W.a.easy,"easy"===O),Object(i.a)(e,W.a.medium,"medium"===O),Object(i.a)(e,W.a.hard,"hard"===O),e)),children:O})]}),Object(_.jsxs)("form",{onSubmit:l,className:W.a.form,children:[g.map((function(e,t){return Object(_.jsxs)(s.a.Fragment,{children:[Object(_.jsx)("input",{id:"checkbox-".concat(t),defaultChecked:j.includes(e),className:W.a.input,type:v,name:"answer",onChange:f,value:e}),Object(_.jsx)("label",{className:W.a.label,htmlFor:"checkbox-".concat(t),children:e})]},e)})),Object(_.jsx)(h,{className:W.a.btn,type:"submit",disabled:!j.length,children:d?"Finish game":"Next question"})]})]})};var D=function(){return Object(_.jsx)("div",{className:"container",children:Object(_.jsx)(B,{})})};c.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(O.a,{store:z,children:Object(_.jsx)(D,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.3483f8c1.chunk.js.map